<!-- shortlist/templates/shortlist/results.html -->
{% extends "shortlist/base.html" %}

{% block content %}
<h1 class="mb-3" style="color: white; font-size: 28px;">Resume Shortlisting Results</h1>
<h2 class="mb-2" style="font-size: 20px; color: white;" >Job: {{ job_title }}</h2>
<p class="mb-3" style="font-size: 14px; color: white;"><strong>Keywords used:</strong> {{ keywords }}</p>

<div class="container py-3" style="max-width: 750px; margin: auto;">

    <!-- Outer Modern Card -->
    <div style="background: #262626; border: 1px solid #3a3a3a; border-radius: 20px; padding: 20px 15px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5); margin-top: -10px;">

        <!-- Title -->
        <h3 style="text-align: center; color: white; margin-bottom: 20px; font-weight: 600; letter-spacing: 0.5px; font-size: 20px;">
            All Ranked Resumes
        </h3>

        <div class="row">
            {% for resume in resumes %}
            <div class="col-md-12 mb-2">
                
                <!-- Each Resume Box -->
                <div style="background-color: #1e1e1e; border: 1px solid #444; border-radius: 15px; padding: 15px; transition: 0.3s; box-shadow: inset 0 0 6px rgba(255,255,255,0.04);">
                    
                    <!-- Name and Email -->
                    <div class="mb-2 text-center">
                        <h4 style="margin: 0; color: #00aaff; font-size: 18px;">{{ resume.name }}</h4>
                        <p style="margin-top: 4px; font-size: 11px; color: #bbb;">{{ resume.email }}</p>
                    </div>

                    <!-- Progress Bar Dynamic Colors -->
                    <div class="progress mb-2" style="height: 8px; border-radius: 20px; background-color: #444;">
                        <div class="progress-bar" role="progressbar"
                            style="width: {{ resume.score }}%; 
                            background: {% if resume.score < 50 %}#ff4d4d{% elif resume.score >= 50 and resume.score < 75 %}#ffcc00{% else %}#00cc66{% endif %};
                            border-radius: 20px;"
                            aria-valuenow="{{ resume.score }}" aria-valuemin="0" aria-valuemax="100">
                        </div>
                    </div>

                    <!-- Score and Download Button -->
                    <div class="d-flex justify-content-between align-items-center">
                        <div style="background: #fff; color: #000; padding: 4px 12px; border-radius: 20px; font-size: 10px; font-weight: bold;">
                            Score: {{ resume.score }}%
                        </div>

                        <a href="{{ resume.file }}" download class="btn btn-primary btn-sm" 
                           style="background-color: #007bff; border: none; border-radius: 18px; padding: 5px 14px; font-size: 11px; font-weight: bold;">
                            Download
                        </a>
                    </div>

                </div>

            </div>
            {% endfor %}
        </div>

    </div>

</div>

<!-- Process More Button -->
<div class="mt-3" style="text-align: right;">
    <a href="{% url 'HR:hr_dashboard' %}" class="btn btn-primary" style="font-size: 14px; padding: 8px 20px;">Process More Resumes</a>
</div>

{% endblock %}